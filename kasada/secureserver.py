# -*- coding: utf-8 -*-
# Auto-generated by RiskByPass Task Panel
# Deps: pip install requests
import requests, time, json, sys

BASE_URL = "https://riskbypass.com"  # API base URL
TOKEN    = "your token"    # Access token (sent as x-api-key)
TIMEOUT  = 60                         # Timeout (seconds)
PROXY = "http://username:password@ip:port"

def run_task(payload):
    session = requests.Session()
    headers = {"Content-Type": "application/json", "x-api-key": TOKEN}

    print("Submitting taskâ€¦")

    try:
        resp = session.post(f"{BASE_URL}/task/submit", headers=headers, json=payload, timeout=30)
        resp.raise_for_status()
        data = resp.json()
    except Exception as e:
        print("Submit request error:", repr(e))
        return

    if not data.get("ok"):
        print("Submit failed:", data)
        return

    task_id = data.get("task_id")
    if not task_id:
        print("No task_id in response:", data)
        return

    print("Submitted, task_id =", task_id)
    
    start_time = time.time()

    while True:
        if time.time() - start_time > TIMEOUT:
            print("Timeout (seconds)")
            return
        try:
            r = session.get(f"{BASE_URL}/task/result/{task_id}", headers={"Cache-Control":"no-cache"}, timeout=30)
            r.raise_for_status()
            j = r.json()
        except Exception as e:
            print("Polling error:", repr(e))
            time.sleep(1)
            continue

        st = j.get("status", "UNKNOWN")
        print("status:", st)

        if st in ("RUNNING", "QUEUED"):
            time.sleep(1)
            continue

        if st == "SUCCESS":
            print("SUCCESS, result:", json.dumps(j.get("result"), ensure_ascii=False, indent=4))
            return j.get("result")
        elif st == "FAILED":
            print("FAILED:", j.get("error", j))
            return
        elif st == "NOT_FOUND":
            print("NOT_FOUND: maybe invalid or recycled task_id")
            return
        else:
            print("UNKNOWN:", j)
            return

if __name__ == "__main__":
    ct_payload = {
        "task_type": "kasada",
        "proxy": PROXY,
        "target_url": "https://sso.secureserver.net/?app=email&realm=pass",
        "protected_api_domain": "sso.secureserver.net",
        "kasada_js_domain": "sso.secureserver.net"
    }
    ct_result = run_task(ct_payload)
    if not ct_result:
        raise Exception("Failed to get ct_result")

    ct = ct_result['x-kpsdk-ct'] # Get the x-kpsdk-ct
    st = ct_result['x-kpsdk-st'] # Get the x-kpsdk-st
    v = ct_result['x-kpsdk-v'] # Get the x-kpsdk-v
    h = ct_result['x-kpsdk-h'] # Get the x-kpsdk-h
    fc = ct_result['x-kpsdk-fc'] # Get the x-kpsdk-fc
    user_agent = ct_result['user-agent'] # Get the user-agent
    sec_ch_ua = ct_result['sec-ch-ua'] # Get the sec-ch-ua
    sec_ch_ua_platform = ct_result['sec-ch-ua-platform'] # Get the sec-ch-ua-platform

    cd_payload = {
        "task_type": "kasada_cd",
        "ct": ct,
        "st": st,
        "fc": fc,
        "s": "aeefe6e71968c244937b3778e5175e42e94b81d5da0ae05d30f4e2c8a1dcbfce" 
    }
    cd = run_task(cd_payload) # Get the x-kpsdk-cd

    headers = {
        'x-kpsdk-ct': ct,
        'sec-ch-ua-platform': sec_ch_ua_platform,
        'Referer': 'https://sso.secureserver.net/?app=email&realm=pass',
        'x-kpsdk-h': h,
        'sec-ch-ua': sec_ch_ua,
        'sec-ch-ua-mobile': '?0',
        'traceparent': '00-a899b4a708d068fdb2179f9d5bf78800-c76f18910982905a-01',
        'x-kpsdk-v': v,
        'x-kpsdk-cd': cd,
        'User-Agent': user_agent,
        'accept': 'application/json',
        'content-type': 'application/json',
    }

    params = {
        'app': 'email',
        'realm': 'pass',
        'status': '0',
    }

    json_data = {
        'plid': 0,
        'corrid': 12704333,
        'password': 'bbbcccddd',
        'API_HOST': 'secureserver.net',
        'include_cdt': False,
        'remember_me': True,
        'include_cookies': True,
        'blackbox': '0400WrV4m/zbwKSVebKatfMjIGtfgullnvSMbKI8QR5Ax7+eYc0cJ/oeRM7jXRPAMZfDFGEE8tf+E2qkGQCwg1NT3mTmOqLA3SnR3w9aeRcqiIIQ7CLfACQL8uDqYI1vbHg5qR64pJmWs4n5DpelHN65IZdbjxitXBqv8VWo4o1/6JS3s3ivf1Sx3E8IHxBf0mVvxrkoxJh4WdsjRnPzgmCNqU1Xk/5ao5Lh/CHxrHnMdwFn24Pqh2Uk5f6a+9aA+eta016MDWI9FIzt5bxXmJFVd7cCLrtHAy8rTn3ScfrBfYTfD1p5FyqIghDsIt8AJAvy4OpgjW9seDmpHrikmZazifkOl6Uc3rkhl1uPGK1cGq/vUSbJ+Ltz3R3+1lLYqHZEQGK67Cnz6PsELF+Ixp/2xnD4KKk7ewZGhYl/hOJGl0F/KbChOEJ6Z2WXXQixfwMOpPVlQYZ5cb6w4SfXjQb987NCb7eqEP2SVeKx7+pHbOEWbSfKNmGDTIhm7BbTI1YLd5imI6dhcZxHVkFHYgZtJe8mR20/oWqfE9LST5p23mUwt6O60biHEhXQGFDiT3XBKA75SqnFv74B84+POrI4MlDvgCJ6XflMpM5YbymrVY7rLMnUY2Yy4xZkFqaUZegb+KaePAdj0dC1DOkZ9ybRxHxfYV3WeA0UYsMZmVY5fSM3wij0LoGRlzfPafZJpaoVoOXUWxljyPAWDv2WfNL3fZapQldpDbTeVl6xUqbS6OOYNvgGFinsbmPfGpPtkEPmdUsprl5Sq8nl3OCiMt8Ua6LE8yqMVQun0jxRYAmjKb1P4ehBV15lxE/eNjwq42w6TZ3RrlK1VsRAR27Zdi+vjqJygRQgGX10lcABhHdx+C83hhuMSInGTUQwVr+xZSPZ3BOJ2d5nlZ52+ncQ4qJLHu4cY6Mt9WpRZpQRyqKemuJqTUnBSvUYsNwTidneZ5Wedvp3EOKiSx7uHGOjLfVqUWaUEcqinpriak1JwUr1GLDcE4nZ3meVnnb6dxDiokseTnOtpbEdaovEpkWTlnMi5v5ndDC26MVOIEzs4/yGBdiZYWs5ngHUuq+Vx63F6egN3u5bh8qtOMZhKoST0dhOCOCSU0oZPWNEfF9hXdZ4DRQ88rUTX4YZ32kssZVBQohh0g6b9qDiaRpLIBX3k1OhdglvRgGVN/HBPvxdktVynp71GBhHyChKevPfBp8j9ZgcXKPDf9f00I5tn8ppbyNYROaFPSmq3eozQ8AQXJSJnbSyKG6ScGT97fcD3S1/PiB8G+mzThNb3T36AlGJPY5ZoEWyzUcQuTeXXFuerLTC43EUS+x32yGAc5lNvf23RvU9Gm4OwISmgy0g78oWgTgyy5bqaoxsFXC86S5id4kTHu7zBUIw1SCERpnqX/UvGw4sFN6b/JCKaoARN1Xvk+emYD/W8+aHmQPUkPLCi6RusBvOna191eTnlyPvJ2HQBCgS7MBhwQToe12mg2WKovdyyRqHAFVA0qrFT9V8dRbXllVV5+B/O6At8hfZwPq6n9AfZ6akVSVIP/NPvdpL1N3x8YkFWgZWJFZbr4EtnF3WtYVH7L/6q7exmllQDfLV61njHAlkR35W87/dewDaOmtBuEOnhUSSqLK47rKGUpzHrVt2Af1SAJtCLxzceiYoKsdnatIf+o+pBQYJ0R5xgR/xyNPLfBP96EpgIacAqNXEBq1CKwxpN2EbBDKml+0KZnHqg4uIJt86itztPtLd6kyRg90+sHeGKcCsGY3vKf8Ay2n5lEQ/iBZjaZu9lvXd1ybUJrdMniqs4fX8kMTimF9RKdsBKnQlnFW4tnM53OGkrmEKX85FhInz38XKQZsWQPds32YRmaUzgHsCSDcDzO/fOVK23rfmYnzy1R/yB5NEGYbAKEPLbXbFn4yhiTeTfVXqoxf0DwnqVnG1yuOoXpwJSd7+kfupB3YU01BMPUj2jImAkHR6QoO17C7S+tf4eEVwB5+R9fpRARK15XcDYj04LvzGfN6uAs29COcitqhZSa2WKhaiiNtoFO6a+dL8cUg5paeCQo7lXQHIXvpqiV/4JzNRhcTWMfZ3dPFzHbKppGWA4gRcCsF/wrz4pyksE8prg8s8T4qAvTM6GJVahcj0iyWKIlG4r5bdYtBUbpa7l0HeJK7eG1uh8e9M0MzyMoOZuwQ+5BGWjFbN10tEF2RCcMQmHyVKCfSJ5qYapQkNjeBa9/+pAzUUXTjwRIEhwNm+io53gNWNPkiW0JRzvT1nMKDaA2PSOk2NpL9H1fReEpuxOvk/lnDp3Tn/3HY2W3gG26RJ1YwCFKZTecNEiihq3KStlXouFciw0oR671r6APIKG1cNhJvxkvkNNTM75QsadiZube5ZvDwp0rhFdoKvsWzybegor3IDBwNxz7oGDY/EJh8lSgn0ieamGqUJDY3gzlbCXZgswjPgORddJSDJoefLPkkn/8k6tsz2UPS0FdiWMWjRum6RKm7wDCbav+XHc0TDwVYT9REOqI04o4UtvejN0AkYwNapwIYmwvvb7xleNXERrBBUR51/7kaWXUbYvQjQKvSggIFR8TOIypDyuQmX0gIaBPvibZrGr5kSGa3J/9RVQJuRJqUwx6TiVSNyID8LGdQIWTJ19nYfYg6yOVfktzAtHUvwB1BKUbWYuH6YBqUd5nIw6TD/6+emi5rRZzFgrS09rdiLs9Hf5yo0aWqk0Pig10NcUn49kqZd+7odugtxq2Ny64Lic+e5Ww00Cpxz6jB772qH1PPs+u1NGqRkTVA2OMRe4O1BZy6Pt8ICZwQWgMjEcaIRlKu+TwwcUr/+eUuZdBvu2MJCSi12NDDnFZBnAu8E4P3FuJ/HjoadT4Vz4bMQ1nNAFyQ1s6MsjE36XyzuMeALFLVs/JUbC++sPUVoltolmuspIYWCCQ/dxeSB6trruIrEiPaVp4Taq7XWCkrYfR4yj4bhUjBW2jfa4tQT0tjSG0UWciIkqC3MfIGiwp6AIyLo82zjdHDsotUNdAFj1WeWKkhtRL6uRS6otc6rb4ZyDNc8Qka/0ub9TslO5JAs5Z7GPDaDJdRh6cNwIP8cOJrcii1Ut3D131nuvO8GN1ase/ccM9nMayjewQYbeI+yG08quW8l+m36g9ISNtgIPepABo1hSEyto00Og1h7YgiioTl6f5+x8LIwFhtCLuxEC/fYO8qRGy93zk8oxOP4Zx/sXskfLPb+n2gjC9gkEDVcIQngtsC2+45Bd14UT1Y54UXeZpFUCFKEIEdcCI0B6ok=;04000qKZ1sF1aYmVebKatfMjIA607oEPGf4YgUVheioR4v30D8X4Ww9UNchAWhdzjc/wmMMIH4rkqVJpgm/8xGuxcGTmOqLA3SnRG2PiY2tWxHjLVi0PeelW7oIX4XbCAQwxkT9pkl3kJO8qtvBU4BJMNgS0rZlQg3zN8VWo4o1/6JQSMdM4NdjSuMEyxUVVSQMR77pNQsClSGlN02l9in8jb5X2139DHKBoCkVdRNGOAOUxIyqAl66Lm/6a+9aA+eta016MDWI9FIzt5bxXmJFVd4xi+fPRVDM5Tn3ScfrBfYSQ2IPH4ypUEjGLHZuxkvh61CkkG8TfyjinGUbmxcvSUkxrEeKrjtQ4K1637opLq63vUSbJ+Ltz3R3+1lLYqHZEQGK67Cnz6PsELF+Ixp/2xojno8oif7S3yn0kqAE11tMNsywVisFh2w1/3iWKzXO2AcCZE9fA/dzyY7ClNTYbJbu6VWlBwAC18l+ZrGl8vvSn/ZjN/sPWSElK+BILlbqy/98rgc+7ipyz4D2oX8xddFqFhU33MfzdCIC2QF9t/7TFFHEFPcMbbHzCN+9Xb1wJWhbDiOIjCGQGiGxDfiLNFNC1UJgA1BQZQ4JudHOlf1KSnrbJSNyIsWB9R+WFa6fdxifyrThRovESnjwNVGXSgGQ8InPsuf6/kpMgG84gzO5PMQF00uJew9XqxzJ4y+q4uvf+jlvM/P2zZVBzJ+o7u0zI+mPNi65X5WFPYlDG9N1+pgCd2Ux7tv/ifc4RYWGCsJAPm4kEbEXARsw+o5bAVSfYwKIcjp6I6LEtcYEgIDUmlBgAVSsOV9IpG/94dXdCJuhcu7D0uboRqSsRkc8t5gicofzOsxF1Rw6NL2GAwt9rATguwW95O22s0fO33l4+luW5IbchTf8GpUeravdrC210e8OGrrVGB8n/NyT5AQJEWh+JVbpQPIEYDfmfBwBYRhc3f5urJ1YLXJ1OaRXpIgfJ/zck+QECRFofiVW6UDyBGA35nwcAWEYXN3+bqydWC1ydTmkV6SIHyf83JPkBAqiTs+2AlqEfwkGouP5PPyuZYWs5ngHUumuaEuaQk7/6e9UgPwHyIPHqW9TJIZnh2J8UIS8xP1xzpdqSgJrtcJbn4KW2br+bRU8xAXTS4l7DQtPYEf0PHxk1gG7+dJK6MAX8iYyy5jvSfyGFDb76Q8lya4a5TmsplSXUwQ92wvN/WkHuE/JcivhLH2aRCIWgwm36LSp2hE1BOYdSufaFzsY7JGaQsMRslT7sDmBeQ5uweNFL7nhi/G4YMC0eK83OdmETH9nfM4eelbkl9aSfcv12T2xKekGDsY+1lz6U8u4ARV8flS7U9ro2yxUaAMJS+No6CDAUGF18POYe85lXFCQTQTO1mkwbIkqjaQTp7FThAm2GGWjQOefLwKzQQ7pWXtRL3OsALfaE4HnqTbJgogzW3W+mjjmiQg/7Hg6U7iOxdIr3KVQ2LgHyoJpL5sxvxwDNryf9+Arnc3+hdHx2FTMv5lNBXETAJ9cs4SCg5wTJ8uGmK5lxVKSkSQHEHEKq3gWOfzfuoJlG0B9XFmDWYUJE5L523ou2LjPbUpjjl1kyQANO0Ny04JJ45pQVlvZlybBN10q+vzegX5XwBLwG2mRUHD5A0Qbr/JnroBmJkM7nI4yGPsb3waOoPn1bX/LihmqpkoP/+whR4TUNJ+avC+Xf/m3AB2pOS2+KDvK8bPzTC4aNYeExNoyTlIAiA+s/OfLVcnVf/s8AJt6fhMZAbPJoPpWFKRPLB1GWs7FJ5sC7K7vvhJNUxDHurj7W8ZzR0aMGVeg0OzQFaqgi3MSCjC5BoN31BZOB+kFHrl2f8Cwcod2MSRh1kn7exCALPyS5DFC3tc/ivli5RzGHQKRh2Vew4zeQlHlw1+lJ4COjIOe1KG0br3wAUMwG2M5NiJby5MqJXGh/4YkBbzg+kTE35by1DFNeS74HWb+OIeCHLZJ2v8xx1es4t2xTecNEiihq3KStlXouFciwM4nefmrawyP9+Barht4rfL3NL5z64iQ/8SUXqmVpoj34Dg42+ihhxyewuSFpcK3T6GqfcRTkUPEOOcgjE+00lYqYzbIebAcmHfGt9n3o8w6uG7xRlyZWkN+L1vlsr2UXJtiwo8VX/o3ImPp4qrma2fGZ3RhcdYO0eLNFKcyrz57YG7Jl2Mi8Xl9YySxK7ZvJxFkaTsczvD+NfiLZ+7aGkbdbu5n0F/eLnUIXU7S+B8BR1NJKL/zsRctgm9w2EbEgfZVg1/RlskJDsHKg1XcCgo5GE7TkpIzX/UPlFNHONWlfTZI7n28YZi7nrnJ4/Z41j/keRat88JBpDz/UNcq3dQhy//tdgnQzLgbbGDZefsxVnxHRZpONf31LbpeK9XFD8apvxrSGqPC/q28rs092+P2jjSixD48t7FXYu13SYwQBQi2en+/DmMnAWjMwr9bdKSi/NcLmQi9m+hLz1550Hwl05TbrIzWT01mxpkT4FCTCWegGeHvZbH4Nb64SH483io53gNWNPkiFw1xZnBiuF0vLHMWxnejz60B7yOTSVtmFmsz6OZi+Htjjc+iJ/K1DOtaTiH4hXkSowTq0gYWuPLcw2q8d/yasjDpdxw07U+MAyANtPiQCjt4ITNWvrgwVFg50vNHValCwJqbMPhNr/j3XGBvPOMvfIQpZFT05s7ExsGpp/LYCPWMvdo7QI+XaECUIH9QU5Tl+DW+uEh+PN1qsUKpmEpksn4fH4rP0WcqlVigxkWiKStB2TS1JincHaWFI5oRtfnj/FTCDojJVrUYrQ999+YhDJE/SeZxEYHdKwbIO03yvDH+LMGBO4gPLG4ufH/rHEFqlO3zxNe1RQ8B5TbrUMpDBdX97u9Efst/JpsBvJLuGClHIBEevf5QSk+c9RFePOQ22XcxHLOkXUn2MjFEc0PlN2kCJNoheEgWXZJOtp3C5k+ePaqI0RsARLItMzwNXOO63EVgUMMspcFMz7bvobFF8fD6y/7IBMe5oc3mYBO8u4xJN0Tzo7FVmPRnjmy/RTuiKLN+8ugX76suZIztbVSyYld6WYEESYGUmmkt0yafJcZCbaNu3Id2gy9uY22bFQksbytChEjVYC1tNORP9BPeFaZ856razktvfouNknIXe3WSYcBEGc6r1my31L2C78qTEXJgxCpy8bzMVUZCudhkeouNhbnfK7WfrmwIaZ56UjoW4D+Ca3fHCWAQO+BO3DELIKzYCjWSmEtbL8/OvBbb0Rmu+JO7SmcwmWf7T0j3LbTa9UVyLDVGMFem+jlL97ReKhuC3Tcn1sI+7PcXz9lgczMVd1Vw/eLABZfwM4C7b3/fYO8qRGy93Nig1h/l7c/XsXskfLPb+n2gjC9gkEDVcIQngtsC2+45Bd14UT1Y54UXeZpFUCFKEIEdcCI0B6ok=',
        'username': 'aaa@vvv.com',
    }
    from curl_cffi import requests
    response = requests.post('https://sso.secureserver.net/v1/api/pass/login', params=params, headers=headers, json=json_data, proxy=PROXY, impersonate='chrome136')
    print(response.text)