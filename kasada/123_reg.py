# -*- coding: utf-8 -*-
# Auto-generated by RiskByPass Task Panel
# Deps: pip install requests
import requests, time, json, random
from primp import Client

BASE_URL = "https://riskbypass.com"                     # API base URL
TOKEN    = "your token"                                 # Access token (sent as x-api-key)
TIMEOUT  = 60                                           # Timeout (seconds)
PROXY    = "http://username:password@host:port"         # Proxy string


def get_ct():
    # Task JSON payload
    payload = {
        "task_type": "kasada",
        "proxy": PROXY,
        "target_url": "https://sso.123-reg.co.uk/",
        "protected_api_domain": "sso.123-reg.co.uk",
        "kasada_js_domain": "sso.123-reg.co.uk"
    }

    session = requests.Session()
    headers = {"Content-Type": "application/json", "x-api-key": TOKEN}

    print("Submitting task…")

    try:
        resp = session.post(f"{BASE_URL}/task/submit", headers=headers, json=payload, timeout=30)
        resp.raise_for_status()
        data = resp.json()
    except Exception as e:
        print("Submit request error:", repr(e))
        return

    if not data.get("ok"):
        print("Submit failed:", data)
        return

    task_id = data.get("task_id")
    if not task_id:
        print("No task_id in response:", data)
        return

    print("Submitted, task_id =", task_id)
    
    start_time = time.time()

    while True:
        if time.time() - start_time > TIMEOUT:
            print("Timeout (seconds)")
            return
        try:
            r = session.get(f"{BASE_URL}/task/result/{task_id}", headers={"Cache-Control":"no-cache"}, timeout=30)
            r.raise_for_status()
            j = r.json()
        except Exception as e:
            print("Polling error:", repr(e))
            time.sleep(1)
            continue

        st = j.get("status", "UNKNOWN")
        print("status:", st)

        if st in ("RUNNING", "QUEUED"):
            time.sleep(1)
            continue

        if st == "SUCCESS":
            print("SUCCESS, result:", json.dumps(j.get("result"), ensure_ascii=False, indent=4))
            return j.get("result")
        elif st == "FAILED":
            print("FAILED:", j.get("error", j))
            return
        elif st == "NOT_FOUND":
            print("NOT_FOUND: maybe invalid or recycled task_id")
            return
        else:
            print("UNKNOWN:", j)
            return

def get_cd(ct, st, fc):
    # Task JSON payload
    payload = {
        "task_type": "kasada_cd",
        "ct": ct,
        "st": st,
        "fc": fc,
        "s": "aeefe6e71968c244937b3778e5175e42e94b81d5da0ae05d30f4e2c8a1dcbfce"
    }

    session = requests.Session()
    headers = {"Content-Type": "application/json", "x-api-key": TOKEN}

    print("Submitting task…")

    try:
        resp = session.post(f"{BASE_URL}/task/submit", headers=headers, json=payload, timeout=30)
        resp.raise_for_status()
        data = resp.json()
    except Exception as e:
        print("Submit request error:", repr(e))
        return

    if not data.get("ok"):
        print("Submit failed:", data)
        return

    task_id = data.get("task_id")
    if not task_id:
        print("No task_id in response:", data)
        return

    print("Submitted, task_id =", task_id)
    
    start_time = time.time()

    while True:
        if time.time() - start_time > TIMEOUT:
            print("Timeout (seconds)")
            return
        try:
            r = session.get(f"{BASE_URL}/task/result/{task_id}", headers={"Cache-Control":"no-cache"}, timeout=30)
            r.raise_for_status()
            j = r.json()
        except Exception as e:
            print("Polling error:", repr(e))
            time.sleep(1)
            continue

        st = j.get("status", "UNKNOWN")
        print("status:", st)

        if st in ("RUNNING", "QUEUED"):
            time.sleep(1)
            continue

        if st == "SUCCESS":
            print("SUCCESS, result:", json.dumps(j.get("result"), ensure_ascii=False, indent=4))
            return j.get("result")
        elif st == "FAILED":
            print("FAILED:", j.get("error", j))
            return
        elif st == "NOT_FOUND":
            print("NOT_FOUND: maybe invalid or recycled task_id")
            return
        else:
            print("UNKNOWN:", j)
            return

if __name__ == "__main__":
    # kasada-cd api is free if you contact us
    kasada_args = get_ct()
    ct = kasada_args['x-kpsdk-ct'] # Get the x-kpsdk-ct
    st = kasada_args['x-kpsdk-st'] # Get the x-kpsdk-st
    v = kasada_args['x-kpsdk-v'] # Get the x-kpsdk-v
    h = kasada_args['x-kpsdk-h'] # Get the x-kpsdk-h
    fc = kasada_args['x-kpsdk-fc'] # Get the x-kpsdk-fc
    cd = get_cd(ct=ct, st=st, fc=fc) # Get the x-kpsdk-cd
    user_agent = kasada_args['user-agent'] # Get the user-agent
    sec_ch_ua = kasada_args['sec-ch-ua'] # Get the sec-ch-ua
    sec_ch_ua_platform = kasada_args['sec-ch-ua-platform'] # Get the sec-ch-ua-platform

    headers = {
        'x-kpsdk-ct': ct,
        'sec-ch-ua-platform': sec_ch_ua_platform,
        'Referer': 'https://sso.secureserver.net/?app=email&realm=pass',
        'x-kpsdk-h': h,
        'sec-ch-ua': sec_ch_ua,
        'sec-ch-ua-mobile': '?0',
        'traceparent': '00-a899b4a708d068fdb2179f9d5bf78800-c76f18910982905a-01',
        'x-kpsdk-v': v,
        'x-kpsdk-cd': cd,
        'User-Agent': user_agent,
        'accept': 'application/json',
        'content-type': 'application/json',
    }

    json_data = {
        'plid': 587240,
        'corrid': 2036558503,
        'password': 'asdmjsandj13',
        'API_HOST': '123-reg.co.uk',
        'include_cdt': True,
        'remember_me': True,
        'include_cookies': True,
        'blackbox': '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;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',
        'username': 'skjdnaj132@asmdk.com',
    }
    from curl_cffi import requests
    response = requests.post('https://sso.123-reg.co.uk/v1/api/idp/login?status=0', headers=headers, json=json_data, proxy=PROXY, impersonate='chrome136')
    print(response.text)