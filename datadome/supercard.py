# -*- coding: utf-8 -*-
# Auto-generated by RiskByPass Task Panel
# Deps: pip install requests
import requests, time, json

BASE_URL = "https://riskbypass.com"  # API base URL
TOKEN    = "your token"    # Access token (sent as x-api-key)
TIMEOUT  = 60                         # Timeout (seconds)
PROXY    = "http://username:password@ip:port"

def run_task(payload):
    session = requests.Session()
    headers = {"Content-Type": "application/json", "x-api-key": TOKEN}

    print("Submitting taskâ€¦")

    try:
        resp = session.post(f"{BASE_URL}/task/submit", headers=headers, json=payload, timeout=30)
        resp.raise_for_status()
        data = resp.json()
    except Exception as e:
        print("Submit request error:", repr(e))
        return

    if not data.get("ok"):
        print("Submit failed:", data)
        return

    task_id = data.get("task_id")
    if not task_id:
        print("No task_id in response:", data)
        return

    print("Submitted, task_id =", task_id)
    
    start_time = time.time()

    while True:
        if time.time() - start_time > TIMEOUT:
            print("Timeout (seconds)")
            return
        try:
            r = session.get(f"{BASE_URL}/task/result/{task_id}", headers={"Cache-Control":"no-cache"}, timeout=30)
            r.raise_for_status()
            j = r.json()
        except Exception as e:
            print("Polling error:", repr(e))
            time.sleep(1)
            continue

        st = j.get("status", "UNKNOWN")
        print("status:", st)

        if st in ("RUNNING", "QUEUED"):
            time.sleep(1)
            continue

        if st == "SUCCESS":
            print("SUCCESS, result:", json.dumps(j.get("result"), ensure_ascii=False, indent=4))
            return j.get("result")
        elif st == "FAILED":
            print("FAILED:", j.get("error", j))
            return
        elif st == "NOT_FOUND":
            print("NOT_FOUND: maybe invalid or recycled task_id")
            return
        else:
            print("UNKNOWN:", j)
            return

if __name__ == "__main__":
    payload = {
        "task_type": "datadome-slider",
        "target_url": "https://login.supercard.ch/cas/login",
        "target_method": "GET",
        "proxy": PROXY
    }
    results = run_task(payload)
    cookies = {
        'DISSESSIONOauthOidcServerSupport': 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCIsImtpZCI6ImE2MmE4ODJhLTk0ODctNDkzMS05ODhmLTAyM2RkNjdhYWUwMSJ9.ZXlKNmFYQWlPaUpFUlVZaUxDSmhiR2NpT2lKa2FYSWlMQ0psYm1NaU9pSkJNalUyUTBKRExVaFROVEV5SWl3aVkzUjVJam9pU2xkVUlpd2lkSGx3SWpvaVNsZFVJaXdpYTJsa0lqb2lNekJoWkRBNFl6VXROVFUxWlMwMFkyUTJMV0ZtWVRJdFkyRXdNV0l6WmpKaE5qTTJJbjAuLjJZUFVCSW1WbURUNXdvUUdCdEVTM0EuOHFSR0lGZUlILTNlYzVNQkVxaTNPV3ltaThwSjF3M2dndHB0WDg3SC1KanhzVjU4ckVHUkNROHRYeWNqV3h1Z0FMdkZOMFZqTWh5Q3ZZY1VlenVpMkpSQlEtNHY1X1NwZkZuckhXX1d1bnNQY1VfRklSYkcyQlpmYl9xc2M4U3I5dWYzQ3BHal8zRmdnX1NXZ0VrUGE2RHVOVndyLWdrTzJYalNScXdiNDRXYnJTVHVfZE9Yak5SV3VFNUNuMm9nLTJ3Zk1QN3pUakdILW9weldGZVhLQS5KYkp4SmVYWENFaVVmMi1haFBIV0czVnJnZV80TnRKZ09HeUEzbE1zSkVn.3_ZK7r6QF1fJKrwxOWZWexowAkHYHmmQRYyWellXau-BV_vXlrERiPQsPZGNJpiOkbGnh7fQmt135LKCjxfpyQ',
        'XSRF-TOKEN': '54f7fe8c-9fca-40fa-a290-1275e2927195',
        'TS0147bc3d': '016df7e16a8c62d5bca729568000da87c4ae1dda573d5599dc4ddfbc3d9087c4f205f12dfa2ee7ad2e02eab1587e29918dca86147019d6df30a274916b15d29ec9ddc34e02b5409bf623ea70156a424ed03e8623fa',
        '__gads': 'ID=31ec24ef8eb77dce:T=1771204017:RT=1771204017:S=ALNI_MbghGno0TR-8Kew1Jk1Tbob80E7yA',
        '__gpi': 'UID=0000120172b19dae:T=1771204017:RT=1771204017:S=ALNI_MZctPws6iMHPoG3e-M0X8Z_MZYqvQ',
        '__eoi': 'ID=10beda669624dd02:T=1771204017:RT=1771204017:S=AA-AfjaouSxPicaUsXsbpBT8BpLE',
        'org.springframework.web.servlet.i18n.CookieLocaleResolver.LOCALE': 'de',
        '_fbp': 'fb.1.1771204034313.34362623588822968.Bg',
        '_ga': 'GA1.1.789379298.1771204034',
        '_gcl_au': '1.1.454790037.1771204035',
        '_ga_9T8H2PLHNV': 'GS2.1.s1771204034$o1$g0$t1771204270$j60$l0$h0',
        'TS014e0601': '016df7e16a2e3c8af1e982e61cea530e1360d206933803454d71d71babeef215649317a14ba60c64c7cfca7f5e4272df4db6e085229c54b69df6e0fd268b66965c0ec674b2',
        '_ga_Y527B7S1ST': 'GS2.1.s1771238438$o1$g0$t1771238438$j60$l0$h0',
        '_ga_0HX60ZSQXP': 'GS2.1.s1771238439$o1$g0$t1771238439$j60$l1$h2093792094',
        'utag_main': 'v_id:019c63fca133000801b53aa2bd090506f002006700980$_sn:2$_se:2$_ss:0$_st:1771240268484$ses_id:1771238437621%3Bexp-session$_pn:1%3Bexp-session$ga4ClientId:c789379298.1771204034%3Bexp-session',
    }
    cookies['datadome'] = results.get('datadome')

    headers = {
        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
        'Accept-Language': 'en,zh-CN;q=0.9,zh;q=0.8',
        'Cache-Control': 'no-cache',
        'Connection': 'keep-alive',
        'Content-Type': 'application/x-www-form-urlencoded',
        'Origin': 'https://login.supercard.ch',
        'Pragma': 'no-cache',
        'Referer': 'https://login.supercard.ch/cas/login',
        'Sec-Fetch-Dest': 'document',
        'Sec-Fetch-Mode': 'navigate',
        'Sec-Fetch-Site': 'same-origin',
        'Sec-Fetch-User': '?1',
        'Upgrade-Insecure-Requests': '1',
        'User-Agent': results.get('ua'),
        'sec-ch-device-memory': '8',
        'sec-ch-ua': '"Not:A-Brand";v="99", "Google Chrome";v="145", "Chromium";v="145"',
        'sec-ch-ua-arch': '"x86"',
        'sec-ch-ua-full-version-list': '"Not:A-Brand";v="99.0.0.0", "Google Chrome";v="145.0.7632.46", "Chromium";v="145.0.7632.46"',
        'sec-ch-ua-mobile': '?0',
        'sec-ch-ua-model': '""',
        'sec-ch-ua-platform': '"Windows"',
    }

    data = {
        'username': '1772asdas1w@gmail.com',
        'password': 'asdasmndja1242.A',
        'execution': '41d912fe-beef-4286-ab3d-d3f18f9c97f5_ZXlKaGJHY2lPaUpJVXpVeE1pSXNJblI1Y0NJNklrcFhWQ0lzSW10cFpDSTZJamN4WmpCa1pHSTRMV1kwTmpZdE5EUXpaUzFoT1RZMUxXRmxOek15WkdNMk9Ua3pNaUo5LjUwS3NUb1RPaFp0anJyWVRCR1FaVVZiNmtEWlp5UVJvTjNxRWNRbmpDS1VfNnhmRXBfMi05UWI4WVJ0ZlQxcWt1Q2RLdkMydjRKd050ZllwTkRvSTJ3d2M4dlVjMFIyM3U5N3JrY2R3aDRUY3hWMTFmWk9lTm0wZUxZVmQ0dHpwRWhieWJ3WFJvaVl4Zk9XVDUtZ0xQallUeUZkYjlsLTFxZkhJbko0YWNDT0FsZ0FDSmFWSnhBTUN1NG9vRFdONzBMT0R5QlhCSWk4QnZGcXN2UUcxNjV1Ri1DNHdTSGZXVk1Hdm5RZXVQNm54M1FhaWtaNC1hX3N4VVl2ZFI1NjVwTks0V1l3QS1FWkxxcE9sWU4yRDktTzcxa0VXMGhMdGlWaGFXQ2szZkJfNDZLRWJ1SGtoQlZvMXp6T3BkUlNiLWRLbGd2QlByc3FSVEN6SWpUOGpYQlczRVVqUG5Gd3hsR0RkZ1dmR3pQVUJKN2ljejQtZVRIdGxNMXkwcEJVSjBYRWZJWS05NC15OGd3VjB5eUF2SFpDLXkySjRVUzJXZ2RObWZETzM1T2pURzV1SEJVQlJQZGJ1TTE0QURGV0NOZFloMDBBenVlbXd0MTVCdU1qd2FtNzk2RElOdWVjSVZKTWxtZjdfa0F3VHgwM1FDNWxod2UwdVJ1dXU5b3NMbDJ0d094TVR0dFRub2tCZXFfR3A2d1RXTmFZWnNuU0FMMzdHNTF1eGpLdUhXRE03ZFJqMEtsQzFuUU1sNnJjclN4XzVIOEhBN1drWWRfcTU1Zkx3WlNuZmlWU19fRTFKblIzblkyM3J0LUg2SXRhdk8yLVJrMEU4dGVZMHJLNmloZmlzOE9vTFVwem5WeExxWG8xR3k3SDFVUF8zd1dIc3VQdGtLVmttRWtzNW1McTlaMEpFcHpsbC14OGRDaHczVzkxRjJjVDJ5NndUQlIwSHZFbXZQR0NCMDM3cFFmX0duT0IzLUt4YnlOallpZzJhbmFNY2wxZlZXLUI2elpxS0c3empLUjE2WGlxbl9vMllnN2c0eC1FWkNmVTNSR1VyWHpyY2hFcGluYWNfbjc4Q1Z4Y2UyRzNQZ0hVbnhEbzloNy1FZU4xTTJLU2VkX2pPdDYteWxUQ3pLYnpHQjZDTWdfUThYVnlDQVJlY3E3cnJQSmRMUzBqUU1ZZUJkS0dudWFncmlGOFhwM3ZRSGJWV3h3Wm5vanppdkZRT08xQWhmem1pWTEtTm1VR1lNdUpEU3lKVUwzOTA2RHFiaks3UEd0U2hGRWZ1dTNBVGptTms4dFJucC1ES0FrT0lKVnZIemxoNDZKUUtvRkE3aG9JNWdRZlBtZkNSVmFhTjY5QmlGUVNxaFFFZTNKcmR1SWM4Y0NsYlJESXhTYkhBVm1MdmNiYUIxRi1HQ05TZlBaVWJvRXc1YWxrdzBja3RGRUJWVFRQZ1RmaVNvems1RU80WTJpUlVoenV3c1A0OXM0ajk4QVdlRmp6WWFGdHEtWDkzOTUtcWhmek1TdG9jNVNtdy1zOC1zZF9CUE9jTUdIa1pXeTdPTHdzX1lLa0RKVmtJakZyWG9sV1BqZkh1WWZEdGN6QkVldVR5S1A5MlotalM2dVY2eGJkZmNSWXNxNDVlREZsdFpJVVl2ME4wbHZYQTBTaUJzWUUzM0pqUFpqaTR1NjljajNEOG1QWGlscUJoRllOUkQ3WGJvTkNMLWd5bUVOVzFZRVJrQld2Y0p5Sk5wdXlLM2g0Y2hlVnJqYzVJdVlVR3dFRzdka3oydG1rMFNTZVFoSE01b0xqbVNOdXQ0TUQzX0ZZaFFrS0FfNlNvems3OTNrWVRwRVV0OVM2MUdEX2lDajNoRm5xbmtZbXItWXZRdWxKUDhwSE11VzU3aHdKSlJiTmFsOFQwT3owUVBObTdhN3BlY2phcEE5b3Jjd18wOEdCMkVQdXl2djBrU05ja2Z1bUkxeXJfMUFrTTVON3RCQWR4RW9xZ19YaWd2RXlfS29GSk9iZlpuMmJFMDVFczVzUXBhNGNBbmpUVnI1cDZ0VkxacjZKa1Z6Z190V1llZW9pQlpOS1o2Tnhjb2p1NzhsbktCMF84cDExWVprTkpIdmNFUG91WUo0ekVMZm95QUVGeldxc2QwSWMyTjhLLU83bTVOWVNJSXgyZzc3MXVuZWZ6YWt4cTNEQW5vcUE2eDRXYms1NjdqSVUyMi1ibzR3WEFRUHlZb2twbGhfZ1JtRzM5QVNnWnRVTGhnZFUycVFuTDYweVFtSzZNcDBXTmVmRDVIN2s2VkNZaV92N2VHR2I5TEgtNUVKV3A2dTdCVkRTWHo4RWlsTGN0YlItdGdJNEoyRnFaNmx0dGp5bUxTT25oeG5iVkd0VUFBUUdlSkhIQ2F4RWJVZk44bExQNzNZbHhXa0pKYVJnQVRfNy01UEUwWTFmVXdEbFZwQmVDXzRWMld2dzhIOHdTTmNZY3M0TTUxd0NJVlgtMVFNb2lsRGVCYURQYmZtbzdQZFFYZjBraGRiZW80dGhLSk8yUjYyMGRSVUxLaUxtOTl6eXJ6RkxsSkkyMGtGdlpLVW5Jbll5RVJPZDlNZEY2NjI0bDVma3Z3ekF4cGw5Rm81SFBlMVEwdzBmZjNONUhRNnFpX0pEVGN5bEVkZmhKYm5pbUZyV3I4LU9WZEpFTmlFQ211Tml0anVqSWk4aDA1cWJrYldueWJuakcwLUF0bXJFc093a195UVNFWDRzQngwcXVmT2tYZklfNTBhOVZHUkN4S0xBVko5azdESVJWQlZkLUJuOGg0eEFqSVlUYjNWcTFxTDdDcnFqRkF3b1F1QkY4Wnc1dldRSFZ4S24zYzhjR0NjbHZmM1VtZEIwLUZfYzZMY1FZeHNWRl9JSDlGTmZJMXh2bkdEbFF2cDR5UnFONTM0bFVCVklmdG5TQ1k3Uk5VT25Lam9UeWVYcUxxZU5VY2hQSldiOWlOZkZsUGNxY0dLVUFtTHVWYkdLRlNZRERwS0FIV1drWVhiNjBuUFdXZFlVdUhNc05la01NV3QtYUtFamVadWREanJXUkp2RDdoWjR6VkJpY2xMa0RaLWhWLWJ2VWVMOVRoRjZWSmlJR19XejRJLUJGSG5vYWV5ZW5MSWdhTHBlYzNyNmNzcFg1YkJ3MURyNHg1WWdLYmU1OEl0ZXFKV1FHX0ZCTkJOSzF2RVV3b1NNWW5HMUpEc1lZaUZwOUVFTmxLb1FtN243Vkl0YVRfM1ZHSG9WZDVlQkU1VEFOeWVObUlmdVhnVGVXalJjVGpkOUxpOXlLM3JpUUdIb3Y0Y1pNdk9MVnVyYlM0eTBuSDQzenpMeU1Fa3RaVUo3S2JxOGFkWHBLLW9nQllDWHRSbXNYMWdNODVZNi00eTNyc3lxbGVpamdPR2VjdmlKWEFNY1BlS3BpUmg2WTFUNEE1aDc1NnJ2Y2Y1bWhOXzloWmVjeldXOFJzdmZiRTFuRHZfdnBEbDQ5cm8zU0pscW5GMHFhWk9JMkZEYmFOa3hjekYyNEtoS0JDWFFOZnYzUEVRd1NLbTFLZFBPZ2Q1N21IZUl5MUFHTGxzWjVrVFpneDdTNWhFY2hJRjROUXBFczNHeHlkTk1RYnYzZUFzeEhxXzJoSFZWc3Q3RzlZZVBKTkFxTEFLbkhBSE1vcWRZUkRfcDFNWWhzWjZTY29CMURxUHYxZFgxMi1WX1REM3lQaktTVVYwVEVmY25nUTRIMllDZEtjbVhrUDFtal82dDh1MGRZU2ZtLURFMGNKVzh6Q0tlQkZJMFhvQ09abW5jNndsZ0NudS1JQ0ZuMEp1Y2JuQWhCWmk0TDAyU2xxbm5teGZNb3BKX2J0bFhNSlpqVjlneU5rbTRwSmpBU3NHSGhTbmkzcGpwaGNlWG96WVR0VWZwLURkRk12R01tdW83QUVVSm5lRHoxRndJVF9JYWk2VzdfZUdCUHZsOU90ZG85YkNFdE5HN295SFgyb2FkNV9RQnl1RWtiSHVtN3E5dFhIN0hxaldSaUgwZFRCMm1oOUNoVmVnUWJHekw5cmlSV1F1MzlWM0dJUjZ6LXNJMGkzeDcyTzFja3NMMFlLeXNMd0FRT2l0aVM1WTF2RjRxaE4tZUU2cklBRFVXMlR2WFR2QngzVEVkNUtXQVNIWkhrWmR4bGFpM1NiaVJEazZBQ2RITkRnd1diVVpHcGlfZlpVdHFxX2JIZ3JMQlljaVBFRThwNkZlWnQ5TWxPNEtxaVVuVEdaalZsYzl5REItZ3JWV0dOaXhEUzc0ZWJzSVMzMGwzdkZWN09lVEZxU2xzWVpHczRqUjJDZUdZTWxHaVgxcGVXMnpSdng1SUpaTWVBMWZGdkdtWjZ4Tmg5Mk5vQjhTNDhNY3BiZmRaU0EtenFnQXNCdy11X0QxTnE3MHVqZTNNQWwyRThiVTVUYkVNRVFoOERiQVQ3MzhKRjBiSzdKbG1IZERQTTJlSkxOXzZmSGFFVlgtb1AzZGtIXzQ0RTI3ZFUxUnBleWJtaHZpbVpxV21WcmI3dzNSS2c0ZlREekV2a2lTOVdfOW1FU1ZDMXZQOHZhZ3FLTWlIU200S1BQTXRMZDBMcERtVlNEQmFZMlBEV25hbWxXMlhVTmhXNUFZSU9xY242djc5cWN5MEFaZzJiM3hMV2wwSENSUkdWSWFSbElnN3QyM0ljWjZqZFlCYklUMXFJQlY5dXJTamx3TklpQ1FUSk9QMHU3b1gwQmJIUnNES2hINzZMX1FMRXpVdkowWG1tdjBLc05wMWE3LUNvODFhU21BOEdfZ1BLVGpHT0RQOGhEazgwVUs4SGlrOWpFdmFqNzNkY016cFhBdDdLQ2s2Zklnc1JwYmpvLTNtQzh3blBuOWJyQmZjZG1aXzdjOS1BNDVFc1VzcmFTLWNKVnk5WkFrZmJXVnV5QjhYTEFwaWJacnU4amRLU3o2M1RIbnZ4RmFfNDIyMjRISUNaYVhtWkw0UFMtZ05EQlRCOXFhVkpYX01rZHZGcjNMM3FfMWh3Z05Dc1hpQTRweFd3VW1IbWJ4dFZFd241cXFqVzZPUjF5NG9WaXRSMi1XWE1Ia2dtenBOVlpaVGZMekEuaWo4SzRERVVQczZFTnEwbFQwZ1pCcG5GQ1lINGQyNjdCaXRQN2Uxb0lvd0l1SVB2cmU1dXplRFBUUUF3R1h1RjY3aHB4bHQ1c1lnTktwU1dDcFh1dUE=',
        '_eventId': 'submit',
        'geolocation': '',
    }
    from primp import Client
    client = Client(impersonate='chrome_133', proxy=PROXY, impersonate_os='windows')
    response = client.post('https://login.supercard.ch/cas/login', cookies=cookies, headers=headers, data=data)
    print(response.text)